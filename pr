-- Check if change tracking is enabled at the database level
IF EXISTS (
    SELECT 1
    FROM sys.change_tracking_databases
    WHERE database_id = DB_ID('YourDatabaseName')
)
BEGIN
    -- Disable change tracking on the database
    ALTER DATABASE YourDatabaseName
    SET CHANGE_TRACKING = OFF;
END
GO



-- Check if change tracking is NOT enabled at the database level
IF NOT EXISTS (
    SELECT 1
    FROM sys.change_tracking_databases
    WHERE database_id = DB_ID('YourDatabaseName')
)
BEGIN
    -- Enable change tracking on the database
    ALTER DATABASE YourDatabaseName
    SET CHANGE_TRACKING = ON
    (
        AUTO_CLEANUP = ON, -- Automatically removes change tracking information after retention period
        CHANGE_RETENTION = 2 DAYS -- Retains change tracking information for 2 days
    );
END
GO
